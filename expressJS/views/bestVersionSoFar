<!DOCTYPE html>
<style>
  body {
    background-color: cyan;
    position: relative;
    justify-items: center;
  }
  /*11 items*/
  #container {
    font-size: 40px;
    /*width: 2000px;*/
    background: magenta;
    display: grid;
    grid-template-rows: repeat(5, 200px);
    grid-template-columns: repeat(5, 200px);
    grid-gap: 40px;

    grid-template-areas:
      "a b c d e"
      "f g h i k"
      "l m n o p"
      "q r s t u";
  }

  #vs {
    /*background-color: crimson;*/
    grid-area: g/m;
    margin-left: 100px;
  }
  #d1 {
    grid-area: f/l/g/m;
  }
  #d2 {
    grid-area: h/n/i/o;
    margin-top: 15px;
  }
  #mainBoxerOptions {
    /* background: lightskyblue;*/
  }
  #mainBoxerText {
    /*background: lightsalmon;*/
  }
  #imageOne {
    /*background: paleturquoise;*/
  }
  #boxerOne {
    background: lightpink;
    height: 300px;
    width: 300px;
    border-radius: 50%;
    border-color: blueviolet;
    border-style: solid;
    border-width: 10px;

    /* margin-right: 700px;*/
  }

  #opponentBoxerText {
    /* background: palegreen;*/
    /*margin-left: 250px;*/
  }
  #opponentBoxerOptions {
    /*background: yellow;*/
    /* margin-right: 500px;*/
  }
  #opponentPicture {
    background: brown;
    height: 300px;
    width: 300px;
    border-radius: 50%;
    border-color: blueviolet;
    border-style: solid;
    border-width: 10px;
    /*margin-left: 700px;*/
    margin-left: 100px;
    margin-right: 100px;
    margin-top: 25px;
  }
  #imageTwo {
    /*background: coral;*/
    /*margin-right: 500px;*/
  }

  #d3 {
    height: 300px;
    margin-left: 100px;
    grid-area: q/r/t/u;
  }
  #box {
    background: purple;
    margin-right: 500px;
    width: 400px;
  }

  /*d1,d2 have label text and dropdown*/
</style>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>List Of Middleweight Champions</title>
  </head>

  <body>
    <h1 style="color: red">MiddleWeight Fanatasy Matchup</h1>

    <div id="container">
      <div id="vs"><h2 style="color: black">VS</h2></div>
      <div id="d1">
        <label id="get-label">
          <div id="mainBoxerText">select a boxer</div>
          <div id="mainBoxerOptions">
            <select id="filters">
              <% for (boxerName of boxerNames){ %>
              <option value="<%=boxerName.id%>"><%=boxerName.name%></option>
              <% } %>
            </select>
          </div>
          <br />
        </label>
        <div id="imageOne">
          <img src="" id="boxerOne" />
        </div>
      </div>
      <div id="d2">
        <label id="get-labelTwo">
          <div id="opponentBoxerText">select an opponent</div>
          <div id="opponentBoxerOptions">
            <select id="opponents">
              <% for (boxerName of boxerNames){ %>
              <option value="<%=boxerName.id%>"><%=boxerName.name%></option>
              <% } %>
            </select>
          </div>
        </label>
        <div id="imageTwo">
          <img src="" id="opponentPicture" />
        </div>
      </div>
      <div id="d3">
        <button id="box">Box</button>
      </div>
      <h3 style="color: silver" id="winnerIs"></h3>
    </div>
  </body>

  <script>
    const label = document.getElementById("get-label");
    const opponenetLabel = document.getElementById("get-labelTwo");
    const boxButton = document.getElementById("box");
    // console.log("fight!", boxButton);

    label.onchange = () => displayImage("filters", "boxerOne");
    opponenetLabel.onchange = () =>
      displayImage("opponents", "opponentPicture");

    async function displayImage(dropDownId, imageId) {
      const dropdown = document.getElementById(dropDownId);

      let boxerId = parseInt(dropdown.value);

      const response = await fetch(
        `http://localhost:9000/api/boxers/${boxerId}/json`
      );

      const json = await response.json();
      const imageElement = document.getElementById(imageId);
      imageElement.src = "https://" + json.imageURL;
    }
    boxButton.onclick = async function () {
      let mainBoxerId = getBoxerId("filters");

      let opponentBoxerId = getBoxerId("opponents");

      const winnerResponse = await fetch(
        `/api/simulatefight/${mainBoxerId}/${opponentBoxerId}`
      );

      let winnerText = await winnerResponse.text();

      winnerIs.innerText = winnerText;
    };

    function getBoxerId(dropDownId) {
      const dropdown = document.getElementById(dropDownId);

      let boxerId = parseInt(dropdown.value);

      return boxerId;
    }
  </script>
  <!--
   1) Make the button bigger and put a bell icon 
   2) image has to be centered and in a cirlce 
   3) Drowpdown and text must fit screen when I expand 
   4) Style the heading
  -->
</html>

